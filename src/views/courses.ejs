<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles/globals.css">
    <link rel="stylesheet" href="styles/fonts.css">
    <link rel="stylesheet" href="styles/header.css">
    <link rel="stylesheet" href="styles/courses.css">
</head>
<body>
    <%- include('layout/header.ejs', { user: user }) %>
    <div class="container">
        <% courses.map((courseType)=>{ %>
            <div class="course__type__name">
                <%= courseType.name %>
            </div>
            <% if (Array.isArray(courseType.courses)) { %>
                <div class="course__list">
                    <% courseType.courses.map((course) =>{ %>
                        <a class="course__card" href="/courses/<%= course.id %>">
                            <div class="course__title">
                                <%= course.title %>
                            </div>
                            <div class="course__description">
                                <%= course.description %>
                            </div>
                            <div class="course__status <%= course.is_permitted ? "purchased" : "not__purchased" %>">
                                <% if (course.is_permitted) { %>
                                    Purchased
                                <% } else { %>
                                    Not purchased
                                <% } %>
                            </div>
                        </a>
                    <% }) %>
                </div>
            <% } %>
        <% }) %>
    </div>
</body>
</html>
